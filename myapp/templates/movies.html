{% extends "base.html" %}
{% block content %}

{% if current_user.is_authenticated %}
<div>
  <div class="u-full-width">
    <a id="add-movie" class="havbar-link" href="{{url_for('movie_list.create_movie')}}">Add Movie</a>
  </div>
  <table class="u-full-width" id="movies-table">
    <thead class="row">
      <tr>
        <th>Title</th>
        <th>Mood</th>
        <th>Genre</th>
      </tr>
    </thead>
    <tbody class="row">
      {% for list in movie_list.items %}
      <tr>
        <td><a id="td-title" href="{{url_for('movie_list.movie', movie_id=list.id)}}">{{list.title}}, {{list.release_year}}</a></td>
        <td>{{list.mood}}</td>
        <td>{{list.genre}}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
<nav aria-label="Page Navigation example">
  <ul class="pagination justify-content-center">
    {% for page_num in movie_list.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=2) %}
    {% if movie_list.page == page_num %}
    <li class="page-item disabled">
      <a class="page-link" href="{{url_for('core.index', page=page_num)}}">{{ page_num }}</a>
    </li>
    {% else %}
    <li class="page-item">
      <a class="page-link" href="{{url_for('core.index', page=page_num)}}">{{ page_num }}</a>
    </li>
    {% endif %}
    {% endfor %}
  </ul>
</nav>

{% else %}
<div class="container">
  {% for list in movie_list.items %}
  <div class="card">
    <div class="car-boy">
      <h4>
        <p class="card-title">{{list.mood}}</p>
      </h4>
      <p>Updated on {{list.date.strftime('%m/%d/%Y')}}</p>
    </div>
  </div>
  {% endfor %}
</div>
{% endif %}
{% endblock %}